{"ast":null,"code":"import _defineProperty from \"/Users/wuyanqiang/Documents/h5/zqplayer-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"antd/lib/layout/style\";\nimport _Layout from \"antd/lib/layout\";\nvar _jsxFileName = \"/Users/wuyanqiang/Documents/h5/zqplayer-admin/src/components/SiderCustom.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n/**\n * Created by hao.cheng on 2017/4/13.\n */\nimport React, { Component } from 'react';\nimport { withRouter } from 'react-router-dom';\nimport routes from '../routes/config';\nimport SiderMenu from './SiderMenu';\nconst Sider = _Layout.Sider;\n\nclass SiderCustom extends Component {\n  constructor(props) {\n    super(props);\n\n    this.recombineOpenKeys = openKeys => {\n      let i = 0;\n      let strPlus = '';\n      let tempKeys = [];\n\n      while (i < openKeys.length) {\n        strPlus += openKeys[i];\n        tempKeys.push(strPlus);\n        i++;\n      }\n\n      return tempKeys;\n    };\n\n    this.menuClick = e => {\n      this.setState({\n        selectedKey: e.key\n      });\n      const popoverHide = this.props.popoverHide; // 响应式布局控制小屏幕点击菜单时隐藏菜单操作\n\n      popoverHide && popoverHide();\n    };\n\n    this.openMenu = v => {\n      this.setState({\n        openKeys: v,\n        firstHide: false\n      });\n    };\n\n    this.state = {\n      mode: 'inline',\n      openKeys: [],\n      selectedKey: '',\n      firstHide: true // 点击收缩菜单，第一次隐藏展开子菜单，openMenu时恢复\n\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.collapsed !== this.state.collapsed) {\n      const collapsed = this.props.collapsed;\n      this.setState(_objectSpread({}, this.getOpenAndSelectKeys(), {\n        collapsed,\n        mode: collapsed ? 'vertical' : 'inline',\n        firstHide: collapsed\n      }));\n    }\n\n    if (prevProps.location.pathname !== this.props.location.pathname) {\n      this.setState(_objectSpread({}, this.getOpenAndSelectKeys()));\n    }\n  }\n\n  getOpenAndSelectKeys() {\n    const location = this.props.location;\n    const pathname = location.pathname;\n    return {\n      openKeys: this.recombineOpenKeys(pathname.match(/[/](\\w+)/gi) || []),\n      selectedKey: pathname\n    };\n  }\n\n  render() {\n    const _this$state = this.state,\n          selectedKey = _this$state.selectedKey,\n          openKeys = _this$state.openKeys,\n          firstHide = _this$state.firstHide,\n          collapsed = _this$state.collapsed;\n    return React.createElement(Sider, {\n      trigger: null,\n      breakpoint: \"lg\",\n      collapsed: collapsed,\n      style: {\n        overflowY: 'auto'\n      },\n      className: \"sider-custom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"logo\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(SiderMenu, {\n      menus: routes.menus,\n      onClick: this.menuClick,\n      mode: \"inline\",\n      selectedKeys: [selectedKey],\n      openKeys: firstHide ? [] : openKeys,\n      onOpenChange: this.openMenu,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), React.createElement(\"style\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"\\n                    #nprogress .spinner{\\n                        left: \".concat(collapsed ? '70px' : '206px', \";\\n                        right: 0 !important;\\n                    }\\n                    \")));\n  }\n\n}\n\nexport default withRouter(SiderCustom);","map":{"version":3,"sources":["/Users/wuyanqiang/Documents/h5/zqplayer-admin/src/components/SiderCustom.tsx"],"names":["React","Component","withRouter","routes","SiderMenu","Sider","SiderCustom","constructor","props","recombineOpenKeys","openKeys","i","strPlus","tempKeys","length","push","menuClick","e","setState","selectedKey","key","popoverHide","openMenu","v","firstHide","state","mode","componentDidUpdate","prevProps","collapsed","getOpenAndSelectKeys","location","pathname","match","render","overflowY","menus"],"mappings":"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","sourcesContent":["/**\n * Created by hao.cheng on 2017/4/13.\n */\nimport React, { Component } from 'react';\nimport { Layout } from 'antd';\nimport { withRouter, RouteComponentProps } from 'react-router-dom';\nimport routes from '../routes/config';\nimport SiderMenu from './SiderMenu';\n\nconst { Sider } = Layout;\n\ntype SiderCustomProps = RouteComponentProps<any> & {\n    popoverHide?: () => void;\n    collapsed?: boolean;\n};\ntype SiderCustomState = {\n    collapsed?: boolean | undefined;\n    openKeys: string[];\n    firstHide: boolean | undefined;\n    selectedKey: string;\n    mode: string;\n};\n\nclass SiderCustom extends Component<SiderCustomProps, SiderCustomState> {\n    constructor(props: any) {\n        super(props);\n        this.state = {\n            mode: 'inline',\n            openKeys: [],\n            selectedKey: '',\n            firstHide: true, // 点击收缩菜单，第一次隐藏展开子菜单，openMenu时恢复\n        };\n    }\n\n    componentDidUpdate(prevProps: SiderCustomProps) {\n        if (this.props.collapsed !== this.state.collapsed) {\n            const { collapsed } = this.props;\n            this.setState({\n                ...this.getOpenAndSelectKeys(),\n                collapsed,\n                mode: collapsed ? 'vertical' : 'inline',\n                firstHide: collapsed,\n            });\n        }\n        if (prevProps.location.pathname !== this.props.location.pathname) {\n            this.setState({ ...this.getOpenAndSelectKeys() });\n        }\n    }\n\n    getOpenAndSelectKeys() {\n        const { location } = this.props;\n        const { pathname } = location;\n        return {\n            openKeys: this.recombineOpenKeys(pathname.match(/[/](\\w+)/gi) || []),\n            selectedKey: pathname,\n        };\n    }\n\n    recombineOpenKeys = (openKeys: string[]) => {\n        let i = 0;\n        let strPlus = '';\n        let tempKeys: string[] = [];\n        while (i < openKeys.length) {\n            strPlus += openKeys[i];\n            tempKeys.push(strPlus);\n            i++;\n        }\n        return tempKeys;\n    };\n\n    menuClick = (e: any) => {\n        this.setState({\n            selectedKey: e.key,\n        });\n        const { popoverHide } = this.props; // 响应式布局控制小屏幕点击菜单时隐藏菜单操作\n        popoverHide && popoverHide();\n    };\n    openMenu = (v: string[]) => {\n        this.setState({\n            openKeys: v,\n            firstHide: false,\n        });\n    };\n    render() {\n        const { selectedKey, openKeys, firstHide, collapsed } = this.state;\n        return (\n            <Sider\n                trigger={null}\n                breakpoint=\"lg\"\n                collapsed={collapsed}\n                style={{ overflowY: 'auto' }}\n                className=\"sider-custom\"\n            >\n                <div className=\"logo\" />\n                <SiderMenu\n                    menus={routes.menus}\n                    onClick={this.menuClick}\n                    mode=\"inline\"\n                    selectedKeys={[selectedKey]}\n                    openKeys={firstHide ? [] : openKeys}\n                    onOpenChange={this.openMenu}\n                />\n                <style>\n                    {`\n                    #nprogress .spinner{\n                        left: ${collapsed ? '70px' : '206px'};\n                        right: 0 !important;\n                    }\n                    `}\n                </style>\n            </Sider>\n        );\n    }\n}\n\nexport default withRouter(SiderCustom);\n"]},"metadata":{},"sourceType":"module"}